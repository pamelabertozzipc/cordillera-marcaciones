<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Marcaci√≥n Uruka</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <p>Obteniendo tu ubicaci√≥n, por favor espera‚Ä¶</p>

  <script>
    (function () {
      // üîπ CONFIGURACI√ìN
      var proyecto = "Uruka"; // CAMBIAR seg√∫n el proyecto
      var formBase = "https://docs.google.com/forms/d/e/1FAIpQLSdK8tgZDYysmPYxETFniafsi7tbA4g60E1b1kDyioqEBA9Jiw/viewform?usp=pp_url";

      var entryProyecto = "1607844803"; // ID de la pregunta "Proyecto"
      var entryLat = "1893463213";   // ‚á¶ REEMPLAZAR por el ID real (solo el n√∫mero)
      var entryLng = "1135262585";  // ‚á¶ REEMPLAZAR por el ID real

      function redirigir(lat, lng) {
        var url =
          formBase +
          "&entry." + entryProyecto + "=" + encodeURIComponent(proyecto) +
          "&entry." + entryLat + "=" + encodeURIComponent(lat) +
          "&entry." + entryLng + "=" + encodeURIComponent(lng);

        window.location.replace(url);
      }

      if (!navigator.geolocation) {
        alert("No pudimos obtener tu ubicaci√≥n. Activa el GPS y vuelve a escanear el c√≥digo.");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        function (pos) {
          var lat = pos.coords.latitude.toFixed(6);
          var lng = pos.coords.longitude.toFixed(6);
          redirigir(lat, lng);
        },
        function (err) {
          alert("No pudimos obtener tu ubicaci√≥n. Revisa permisos de ubicaci√≥n y vuelve a intentar.");
        },
        {
          enableHighAccuracy: true,
          timeout: 10000,
          maximumAge: 0
        }
      );
    })();
  </script>
</body>
</html>
